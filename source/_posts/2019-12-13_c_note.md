---
title: C语言笔记
date: 2019-12-13 12:12:14
tags: C
categories: C语言
toc: true
excerpt: 记录C语言相关的笔记
---
# 编译和链接
- 编译器的任务
编译器把**源代码**（如，用C语言编写的代码）翻译成等价的**机器语言代码**（也叫作目标代码）。
- 链接器的任务
链接器把编译器翻译好的**目标代码**、**库代码**和**启动代码**组合起来，生成一个**可执行程序**。
## gcc
### C程序的完整编译过程示例
1. 预处理（Prepressing）
```bash
gcc -E hello.c -o hello.i
```
2. 编译（Compilation）
```bash
gcc -S hello.i -o hello.s
```
3. 汇编（Assembly）
```bash
gcc -c hello.s -o hello.o
```
4. 链接（Linking）
```bash
gcc hello.o -o hello
``` 
### GCC基本语法
```bash
-o [filename]：指定输出文件名称。

-c：仅编译，不进行链接，生成目标文件（.o）。

-E：仅执行预处理，生成预处理文件（.i）。

-S：将源代码编译为汇编代码（.s）。

-g：生成调试信息，便于使用调试工具（如GDB）。

-O：优化代码，支持-O1、-O2、-O3等不同优化级别。

-Wall：启用所有警告信息。

-static：使用静态链接。

-shared：生成共享库。

-I [dir]：指定头文件搜索路径。

-L [dir]：指定库文件搜索路径。

-l [libname]：链接指定的库。
```
# sizeof和strlen
 |      | sizeof       | strlen                                 |
 | ---- | ------------ | -------------------------------------- |
 | 性质 | 编译时运算符 | ‌库函数(string.h)                      |
 | 作用 | 计算字节大小 | 计算字符串的长度（不包括结尾的\0字符） |
# 指针
指针(**pointer**)是一个值为内存地址的变量（或数据对象）。
## 函数指针&函数指针
|          | 指针函数                       | 函数指针                   |
| -------- | ------------------------------ | -------------------------- |
| 性质     | 函数，返回指针类型             | 指针变量，存储函数地址     |
| 示例     | int* fun(int a)                | int (*fun)(int, int)       |
| 使用场景 | 返回数据地址（如数组、字符串） | 动态调用函数（如回调机制） |
